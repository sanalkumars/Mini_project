     
            <%- include("../partials/adminHeader.ejs") %>


            <!-- Content Start -->
            <div class="content">
                <%- include("../partials/adminNavbar.ejs") %>
    
                <!-- Navbar End -->
    
    
                <!-- Table Start -->
                <div class="container-fluid pt-4 px-4">
                    <div class="row g-4">
                        
                        
                        
                       
                        
                        <div class="col-12">
                            <div class="bg-secondary rounded h-100 p-4">
                                <h6 class="mb-4" style="text-align: center;">Users</h6>
                                <div class="table-responsive">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>user_id</th>
                                                <th>Name</th>
                                                <th>Email</th>
                                                 <th>Actions</th>
                                                
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <% users.forEach(users => { %>
                                                <tr id="trrow">
                                                    <td><%=users._id %></td>
                                                    <td><%= users.name %></td>
                                                    <td><%= users.email %></td>
                                                    <td>
                                                    <button class="btn btn-primary" id="toggleButton_<%= users._id %>"
                                                        data-user-id="<%= users._id %>"
                                                        data-user-blocked="<%= users.isBlocked %>" >
                                                    <%= users.isBlocked ? 'Unblock' : 'Block' %>
                                                </button>
                                                </td>
                                                
                                
                                                </tr>
                                            <% }); %>
                                           
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- <script>
                    const buttons = document.querySelectorAll("button");
                
                    buttons.forEach(button => {
                        button.addEventListener("click", () => {
                            const userId = button.getAttribute("data-user-id");
                            const userBlocked = button.getAttribute("data-user-blocked") === "true";
                
                            // Send an AJAX request to your server based on the updated button status.
                            const url = userBlocked ? `/admin/unblock/${userId}` : `/admin/block/${userId}`;
                
                            fetch(url, {
                                method: "GET",
                            })
                            .then(response => {
                                if (response.status === 200) {
                                    // Toggle the button text and data attribute immediately upon success.
                                    button.setAttribute("data-user-blocked", !userBlocked);
                                    button.textContent = userBlocked ? 'Unblock' : 'Block';
                                } else {
                                    // Handle errors or display a message if the request fails.
                                    console.error("Request failed.");
                                }
                            })
                            .catch(error => {
                                console.error(error);
                            });
                        });
                        
                    });
                    
                </script> -->
                <script>
                    const buttons = document.querySelectorAll("button");
                
                    buttons.forEach(button => {
                        button.addEventListener("click", () => {
                            const userId = button.getAttribute("data-user-id");
                            const userBlocked = button.getAttribute("data-user-blocked") === "true";
                
                            // Toggle the button text and data attribute immediately.
                            button.setAttribute("data-user-blocked", !userBlocked);
                            button.textContent = userBlocked ? 'Unblock' : 'Block';
                
                            // Send an AJAX request to your server based on the updated button status.
                            const url = userBlocked ? `/admin/unblock/${userId}` : `/admin/block/${userId}`;
                
                            fetch(url, {
                                method: "GET",
                            })
                            .then(response => {
                                if (response.status !== 200) {
                                    // If the request fails, revert the button text and data attribute.
                                    button.setAttribute("data-user-blocked", userBlocked);
                                    button.textContent = userBlocked ? 'Block' : 'Unblock';
                                    console.error("Request failed.");
                                }
                            })
                            .catch(error => {
                                // Handle errors or display a message if the request fails.
                                console.error(error);
                            });
                        });
                    });
                </script>
                
                <!-- Table End -->
                <!-- JavaScript Libraries -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="/lib/chart/chart.min.js"></script>
<script src="/lib/easing/easing.min.js"></script>
<script src="/lib/waypoints/waypoints.min.js"></script>
<script src="/lib/owlcarousel/owl.carousel.min.js"></script>
<script src="/lib/tempusdominus/js/moment.min.js"></script>
<script src="/lib/tempusdominus/js/moment-timezone.min.js"></script>
<script src="/lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js"></script>

<!-- Template Javascript -->
<script src="/adminjs/main.js"></script>
    
                
    
                